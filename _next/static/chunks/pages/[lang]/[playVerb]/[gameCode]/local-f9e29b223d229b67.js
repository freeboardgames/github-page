(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[102],{2003:function(t,e,n){var r={"./tictactoe/board":2931};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=2003},6871:function(t,e,n){var r={"./gamesShared/definitions/game":6137,"./tictactoe/game":3791};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=6871},6197:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[lang]/[playVerb]/[gameCode]/local",function(){return n(4145)}])},4145:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSG:function(){return d},default:function(){return h}});var r=n(4246),i=n(9329),o=n(2313),s=n(9722),a=n(169);n(7378);function l(){return(0,r.jsx)("h1",{children:"CONNECTION LOST"})}var c=n(1018);function u(t){var e=t.gameArgs,n=t.board,i=function(t){return(0,r.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,r.jsx)(n,(0,s.Z)({},t)),(0,r.jsx)(l,{})]})};return function(t){var l=(0,c.$G)("game-".concat(e.gameCode)).t,u=(0,a.Z)((0,s.Z)({},t),{gameArgs:e,translate:l});return!t.isConnected&&e.mode!==o.G.LocalFriend?(0,r.jsx)(i,(0,s.Z)({},u)):(0,r.jsx)(n,(0,s.Z)({},u))}}var d=!0,h=function(t){var e=(0,c.$G)("Game").t,s=[{playerID:0,name:e("player_1")},{playerID:1,name:e("player_2")}],a={gameCode:t.gameId,mode:o.G.LocalFriend,lang:t.params.lang,name:t.name,players:s},l=n(2003)("./".concat(t.gameId,"/board")).default,d=n(6871)("./".concat(t.gameId,"/game")).default,h=(0,i.K)({board:u({gameArgs:a,board:l}),game:d,debug:!1});return(0,r.jsx)(h,{})}},6137:function(t,e,n){"use strict";var r;n.r(e),n.d(e,{IGameStatus:function(){return r}}),function(t){t[t.IN_DEVELOPMENT=0]="IN_DEVELOPMENT",t[t.PUBLISHED=1]="PUBLISHED"}(r||(r={}))},2313:function(t,e,n){"use strict";var r;n.d(e,{G:function(){return r}}),function(t){t.AI="AI",t.OnlineFriend="online",t.LocalFriend="local"}(r||(r={}))},2931:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return N}});var r=n(4364),i=n(619),o=n(6080),s=n(4246),a=n(7378),l=n(4153),c=n(8473),u="/_next/static/media/fbg_logo_white_48.7c343fc2.png",d=n(8666),h=n(1195),p=n(8803),x=n(3455),g=n(9894),m=n.n(g),f=(n(4284).env.JEST_WORKER_ID,function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){var t;return(0,r.Z)(this,n),(t=e.apply(this,arguments)).state={menuAnchorEl:null},t._openOptionsMenu=function(e){t.setState({menuAnchorEl:e.currentTarget})},t._closeOptionsMenu=function(){t.setState({menuAnchorEl:null})},t._wrapOnClick=function(e){return function(){t._closeOptionsMenu(),e()}},t}var a=n.prototype;return a.componentDidMount=function(){this.props.avoidOverscrollReload&&(document.body.style.overscrollBehavior="none")},a.componentWillUnmount=function(){this.props.avoidOverscrollReload&&(document.body.style.overscrollBehavior="auto")},a.render=function(){var t,e=this.props.gameArgs.name;return e&&(t=(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,style:{float:"left",paddingTop:"9px",color:"white"},children:e})),(0,s.jsxs)("div",{style:{width:"100%",height:"100%",backgroundColor:"black"},children:[(0,s.jsxs)("div",{style:{display:"flex",maxWidth:this.props.maxWidth||"500px",marginLeft:"auto",marginRight:"auto"},children:[(0,s.jsx)(m(),{href:"/".concat(this.props.gameArgs.lang),children:(0,s.jsxs)("a",{style:{textDecoration:"none",display:"flex"},children:[(0,s.jsx)("img",{src:u,alt:"FreeBoardGames.org",style:{paddingRight:"16px"}}),t]})}),(0,s.jsx)("div",{style:{flexGrow:1}}),this.renderChatButton(),this.getOptionsMenuButton(),this.getOptionsMenuItems()]}),(0,s.jsx)("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 49px)",textAlign:"center",lineHeight:"calc(100vh - 49px)"},children:(0,s.jsx)("div",{style:{position:"relative",width:"100%",maxWidth:this.props.maxWidth||"500px",color:"white",display:"inline-block",verticalAlign:"middle",lineHeight:"normal"},children:this.props.children})})]})},a.renderChatButton=function(){return null},a.hasOptionsMenu=function(){return this.props.optionsMenuItems&&this.props.optionsMenuItems.length>0},a.getOptionsMenuButton=function(){if(this.hasOptionsMenu())return(0,s.jsx)(d.Z,{onClick:this._openOptionsMenu,"aria-label":"Open options",variant:"outlined",children:(0,s.jsx)(h.Z,{style:{color:"white"}})})},a.getOptionsMenuItems=function(){var t=this;if(!this.hasOptionsMenu()){var e=this.state.menuAnchorEl,n=this.props.optionsMenuItems().map((function(e,n){return(0,s.jsx)(x.Z,{onClick:t._wrapOnClick(e.onClick),children:e.text},"option-".concat(n))}));return(0,s.jsx)(p.Z,{id:"simple-menu",anchorEl:e,open:Boolean(e),onClose:this._closeOptionsMenu,children:n})}},n}(a.Component)),v=n(7545),y=n(2384),j=n(5609);function _(){return(0,s.jsx)("div",{style:{marginLeft:"auto"},children:(0,s.jsx)(m(),{href:"/",children:(0,s.jsx)("a",{style:{textDecoration:"none",display:"flex",color:"white"},children:(0,s.jsx)(j.Z,{})})})})}var w=function(t){var e,n=t.FEATURE_FLAG_readyForDesktopView?"1200px":"500px";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:(0,s.jsx)(v.Z,{position:"sticky",children:(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(m(),{href:"/".concat(t.lang),children:(0,s.jsxs)("a",{style:{textDecoration:"none",display:"flex",alignItems:"center"},children:[(0,s.jsx)("img",{style:{marginRight:"8px"},width:"48",height:"48",src:u,alt:"FbG"}),(0,s.jsx)(c.Z,{component:"h1",variant:"h6",style:{color:"white"},children:"FreeBoardGames.org"})]})}),null!==(e=t.toolbarContent)&&void 0!==e?e:(0,s.jsx)(_,{})]})})}),(0,s.jsx)("div",{style:{maxWidth:n,marginLeft:"auto",marginRight:"auto"},"data-testid":"childrenDiv",children:t.children})]})},C=n(1589),O=n(1018);function A(t){return t.extraCardContent?(0,s.jsx)("div",{style:{paddingBottom:"12px",maxWidth:"500px",margin:"auto"},children:t.extraCardContent}):null}function k(t){var e=(0,O.$G)("GameOver").t,n=(0,s.jsx)(A,{extraCardContent:t.extraCardContent}),r=(0,s.jsx)("div",{style:{textAlign:"center"},children:(0,s.jsxs)(d.Z,{variant:"outlined",style:{marginRight:"auto",marginLeft:"auto",marginBottom:"24px"},children:[(0,s.jsx)(C.Z,{style:{marginRight:"8px"}}),e("play_again")]})});return(0,s.jsxs)(w,{FEATURE_FLAG_readyForDesktopView:!0,lang:t.gameArgs.lang,children:[(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,align:"center",style:{marginTop:"16px"},"data-testid":"gameOverText",children:e("game_over",{result:t.result})}),r,n]})}var E=(0,l.qC)((0,l.hC)("GameLayout"))((function(t){var e;return t.gameOver?(0,s.jsx)(k,{result:t.gameOver,gameArgs:t.gameArgs,extraCardContent:t.extraCardContent}):(0,s.jsx)(f,{optionsMenuItems:function(){var n;return null!==(e=null===(n=t.optionsMenuItems)||void 0===n?void 0:n.call(t))&&void 0!==e?e:[]},maxWidth:t.maxWidth,avoidOverscrollReload:t.avoidOverscrollReload,gameArgs:t.gameArgs,children:t.children})})),I={strokeWidth:.1},G={stroke:"white",strokeWidth:.025},Z=function(t){return(0,s.jsxs)("g",{className:"cross",children:[(0,s.jsx)("line",{x1:t.x+.25,y1:t.y+.25,x2:t.x+.75,y2:t.y+.75,stroke:"red",style:I}),",",(0,s.jsx)("line",{x1:t.x+.75,y1:t.y+.25,x2:t.x+.25,y2:t.y+.75,stroke:"red",style:I})]},"cross".concat(t.x,",").concat(t.y))},b=function(t){return(0,s.jsx)("circle",{cx:t.x+.5,cy:t.y+.5,r:".25",fill:"none",stroke:"lime",style:I},"circle".concat(t.x,",").concat(t.y))},M=[(0,s.jsx)("line",{x1:"1",y1:"0",x2:"1",y2:"3",style:G},"line1"),(0,s.jsx)("line",{x1:"2",y1:"0",x2:"2",y2:"3",style:G},"line2"),(0,s.jsx)("line",{x1:"0",y1:"1",x2:"3",y2:"1",style:G},"line3"),(0,s.jsx)("line",{x1:"0",y1:"2",x2:"3",y2:"2",style:G},"line4"),(0,s.jsx)("line",{x1:"0",y1:"1",x2:"3",y2:"1",style:G},"line5")],B=n(2313);function D(t,e){return(function(t){return t&&t.mode===B.G.OnlineFriend}(t)||function(t){return t&&t.mode===B.G.AI}(t))&&!function(t){return null===t}(e)}var L=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){var t;return(0,r.Z)(this,n),(t=e.apply(this,arguments)).onClick=function(e){return function(){t.isActive(e)&&t.props.moves.clickCell(e)}},t}var a=n.prototype;return a.isActive=function(t){return this.props.isActive&&null===this.props.G.cells[t]},a._getStatus=function(){if(D(this.props.gameArgs,this.props.playerID))return this.props.ctx.currentPlayer===this.props.playerID?this.props.translate("your_turn"):this.props.translate("waiting_for_opponent");switch(this.props.ctx.currentPlayer){case"0":return this.props.translate("red_s_turn");case"1":return this.props.translate("green_s_turn")}},a._getGameOver=function(){if(D(this.props.gameArgs,this.props.playerID))return void 0!==this.props.ctx.gameover.winner?this.props.ctx.gameover.winner===this.props.playerID?this.props.translate("you_won"):this.props.translate("you_lost"):"draw";switch(this.props.ctx.gameover.winner){case"0":return this.props.translate("red_won");case"1":return this.props.translate("green_won");case void 0:return this.props.translate("draw")}},a.render=function(){return this.props.ctx.gameover?(0,s.jsx)(E,{gameOver:this._getGameOver(),extraCardContent:this._getGameOverBoard(),gameArgs:this.props.gameArgs}):(0,s.jsx)(E,{gameArgs:this.props.gameArgs,children:this._getBoard()})},a._getCells=function(){for(var t=[],e=0;e<3;e++)for(var n=0;n<3;n++){var r=3*e+n;t.push((0,s.jsx)("rect",{x:e,y:n,width:"1",height:"1",fill:"black",onClick:this.onClick(r)},"".concat(r)));var i=void 0;"0"===this.props.G.cells[r]?i=(0,s.jsx)(Z,{x:e,y:n},"cross".concat(r)):"1"===this.props.G.cells[r]&&(i=(0,s.jsx)(b,{x:e,y:n},"circle".concat(r))),i&&t.push(i)}return t},a._getBoard=function(){return(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Z,{variant:"h5",style:{textAlign:"center",color:"white",marginBottom:"16px"},children:this._getStatus()}),(0,s.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 3 3",children:[this._getCells(),M]})]})},a._getGameOverBoard=function(){return(0,s.jsx)("div",{style:{textAlign:"center"},children:(0,s.jsxs)("svg",{width:"50%",height:"50%",viewBox:"0 0 3 3",children:[this._getCells(),M]})})},n}(a.Component),N=L},3791:function(t,e,n){"use strict";n.r(e),n.d(e,{TictactoeGame:function(){return a},isVictory:function(){return s}});var r=n(9722),i=n(169),o=n(6131);function s(t){var e=!0,n=!1,r=void 0;try{for(var i,o=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]][Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,a=t[s[0]],l=a,c=!0,u=!1,d=void 0;try{for(var h,p=s[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){if(t[h.value]!==a){l=null;break}}}catch(x){u=!0,d=x}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}if(null!=l)return!0}}catch(x){n=!0,r=x}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return!1}var a={name:"tictactoe",setup:function(){return{cells:Array(9).fill(null)}},moves:{clickCell:function(t,e,n){var s=(0,o.Z)(t.cells);if(null===s[n])return s[n]=e.currentPlayer,(0,i.Z)((0,r.Z)({},t),{cells:s})}},turn:{minMoves:1,maxMoves:1},endIf:function(t,e){return s(t.cells)?{winner:e.currentPlayer}:0===t.cells.filter((function(t){return null===t})).length?{draw:!0}:void 0}};e.default=a}},function(t){t.O(0,[894,157,774,888,179],(function(){return e=6197,t(t.s=e);var e}));var e=t.O();_N_E=e}]);