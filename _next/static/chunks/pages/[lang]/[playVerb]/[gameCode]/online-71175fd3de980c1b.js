(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{2321:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[lang]/[playVerb]/[gameCode]/online",function(){return t(5116)}])},587:function(e,n){"use strict";n.Z={src:"/_next/static/media/fbg_logo_white_48.7c343fc2.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAd0lEQVR42kXNIQrCAABG4V8Ny3YxDMEmaDWIoN3uMcQLqEFRsQlW68LGYGllfQfYZcb7B4Oxl1771Mewmw17Zg4kloTix5ctL04cKclE7jshF24UnFmJzB/mfnDlT0oiSq/rEU/ejqmIxMETibEXTL0jaB0PerwBQUtBrTw/pEYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},8067:function(e,n,t){"use strict";var r=t(4364),a=t(619),o=t(6080),i=t(4246),s=t(7378),c=t(890),u=t.n(c),l=function(e){(0,a.Z)(t,e);var n=(0,o.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).outerLayerRef=s.createRef(),e.onClick=function(n){n.target===e.outerLayerRef.current&&e.props.onClickaway&&e.props.onClickaway()},e}return t.prototype.render=function(){return(0,i.jsx)("div",{className:u().Main,onClick:this.onClick,ref:this.outerLayerRef,children:(0,i.jsx)("div",{className:u().Inner,children:this.props.children})})},t}(s.Component);n.Z=l},9723:function(e,n,t){"use strict";t.d(n,{z:function(){return i}});var r=t(4246),a=t(9171),o=t(4369);function i(){var e=(0,o.$G)("LoadingMessage").t;return(0,r.jsx)(a.Z,{type:"loading",message:e("loading")})}},9171:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(4246),a=(t(7378),t(5039)),o=function(e){return(0,r.jsx)("svg",{viewBox:"0 0 1 1",style:e.style,children:(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:"0.2",y1:"0.2",x2:"0.8",y2:"0.8",stroke:"black",strokeWidth:"0.05"}),(0,r.jsx)("line",{x1:"0.8",y1:"0.2",x2:"0.2",y2:"0.8",stroke:"black",strokeWidth:"0.05"})]})})},i=t(4794),s=t(8330);var c=function(e){var n;n="error"===e.type?(0,r.jsx)(o,{style:{height:"128px"}}):(0,r.jsx)(a.Z,{});var t=(0,r.jsxs)("div",{style:{paddingTop:"16px",textAlign:"center"},children:[n,(0,r.jsxs)(i.Z,{variant:"h6",gutterBottom:!0,style:{paddingTop:"16px"},children:[e.message,(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),e.actionComponent]})]});return e.skipFbgBar?t:(0,r.jsx)(s.q,{children:t})}},5116:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return R},default:function(){return D}});var r=t(2050),a=t(4246),o=t(8239),i=t(9312),s=t(7378),c=[null,"charizard","pikachu"],u=f([null,"localhost:8001"]);function l(e){var n=(0,s.useState)({resolved:!1}),t=n[0],r=n[1];return(0,s.useEffect)((function(){return(0,o.Z)((function(){var n,t,a,o,s,l,m,g,x;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(n=function(){if(!location)return u;if(!location.hostname)return u;if("www.freeboardgames.org"!=location.hostname.toLowerCase())return u;return f(c.map((function(e){return e?"".concat(e,".freeboardgames.org:8001"):null})))}(),e)return r(d(n[e])),[2];n.sort((function(){return Math.random()-.5})),t=!0,a=!1,o=void 0,i.label=1;case 1:i.trys.push([1,6,7,8]),s=n[Symbol.iterator](),i.label=2;case 2:return(t=(l=s.next()).done)?[3,5]:[4,h((m=l.value).hostname)];case 3:if(i.sent())return r(d(m)),[2];i.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return g=i.sent(),a=!0,o=g,[3,8];case 7:try{t||null==s.return||s.return()}finally{if(a)throw o}return[7];case 8:return n.sort(),x=n.filter((function(e){return null!==e.hostname})).map((function(e){return e.hostname})),r({resolved:!0,serversDown:x}),[2]}}))}))(),function(){}}),[]),t}function d(e){return{resolved:!0,hostname:e.hostname,index:e.index}}function f(e){return e.map((function(e,n){return{hostname:e,index:n}}))}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:if(!e)return[2,!1];n=location.protocol||"http:",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch("".concat(n,"//").concat(e,"/open"))];case 2:return t=r.sent(),[3,4];case 3:return r.sent(),[2,!1];case 4:return t.ok?[4,t.text()]:[2,!1];case 5:return[2,"open"===r.sent()]}}))}))).apply(this,arguments)}var g="fbgNickname2";var x=t(5830),p=t(8735),v=t(4369),y=t(8067),j=t(9321),k=t.n(j),_=t(3842),A=t(4794),b=t(1793),w=/^[A-Za-z0-9]*$/;function Z(e){return(null===e||void 0===e?void 0:e.length)>0&&e.match(w)}var I=function(e){return function(n){e(n.target.value)}},N=function(e,n){return function(){Z(e)&&n(e)}},C=function(e,n){return function(t){"Enter"===t.key&&n(e)}};function E(e){var n=(0,v.$G)("NicknamePrompt").t,t=(0,s.useState)(""),r=t[0],o=t[1],i=Z(r),c=function(e){var n,t=(0,v.$G)("NicknamePrompt").t;return e.match(w)||(n=t("alphanumerical_characters_only")),n}(r),u=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(p.Z,{autoFocus:!0,type:"text",defaultValue:r,onChange:I(o),onKeyPress:C(r,e.setNickname),helperText:c,error:!!c,inputProps:{maxLength:15}})}),(0,a.jsx)(x.Z,{variant:"contained",color:"primary",style:{marginTop:"16px"},onClick:N(r,e.setNickname),disabled:!i,children:n("set_nickname")})]});return(0,a.jsx)(y.Z,{children:(0,a.jsxs)(_.Z,{className:k().NicknameCard,children:[(0,a.jsx)(A.Z,{style:{paddingTop:"16px"},variant:"h5",component:"h3",children:n("enter_your_nickname")}),(0,a.jsx)(b.Z,{children:u})]})})}var L=t(8330),S=t(9723);var T=t(9171),B=t(6677),P=t.n(B),R=!0,D=function(e){var n=l(),t=(0,r.Z)(function(){var e=(0,s.useState)({loaded:!1,loggedIn:!1}),n=e[0],t=e[1];return(0,s.useEffect)((function(){var e=localStorage.getItem(g);t(e?{loaded:!0,loggedIn:!0,nickname:e}:{loaded:!0,loggedIn:!1})}),[]),[n,function(e){localStorage.setItem(g,e),t({loaded:!0,loggedIn:!0,nickname:e})}]}(),2),o=t[0],i=t[1],c=(0,r.Z)(function(){var e=(0,s.useState)({loaded:!1}),n=e[0],t=e[1];return[n,function(e){var n={numPlayers:e.numPlayers};fetch("".concat(location.protocol,"//").concat(e.hostname,"/games/").concat(e.gameId,"/create"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var n=e.matchID;t({loaded:!0,success:!0,roomId:n})}),(function(e){console.error(e),t({loaded:!0,success:!1})}))}]}(),2),u=c[0],d=c[1];if(!n.resolved)return(0,a.jsx)(S.z,{});if(n.serversDown)return(0,a.jsx)(T.Z,{type:"error",message:"Servers down: ".concat(n.serversDown.join(", "))});if(!o.loaded)return(0,a.jsx)(S.z,{});if(!o.loggedIn)return(0,a.jsx)(L.q,{children:(0,a.jsx)(E,{setNickname:i})});var f=o.nickname;if(!u.loaded){var h=n.hostname;return d({nickname:f,gameId:e.gameId,hostname:h,numPlayers:2}),(0,a.jsx)(S.z,{})}return u.success&&u.roomId?(P().replace("/".concat(e.params.lang,"/room?s=").concat(n.index,"&i=").concat(u.roomId)),(0,a.jsx)(S.z,{})):(0,a.jsx)(T.Z,{type:"error",message:"Failed to create room"})}},8330:function(e,n,t){"use strict";t.d(n,{q:function(){return f}});var r=t(4246),a=(t(7378),t(1267)),o=t(3884),i=t(4794),s=t(587),c=t(9894),u=t.n(c),l=t(5609);function d(){return(0,r.jsx)("div",{style:{marginLeft:"auto"},children:(0,r.jsx)(u(),{href:"/",children:(0,r.jsx)("a",{style:{textDecoration:"none",display:"flex",color:"white"},children:(0,r.jsx)(l.Z,{})})})})}var f=function(e){var n,t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:(0,r.jsx)(a.Z,{position:"sticky",children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(u(),{href:"/".concat(null!==(n=e.lang)&&void 0!==n?n:""),children:(0,r.jsxs)("a",{style:{textDecoration:"none",display:"flex",alignItems:"center"},children:[(0,r.jsx)("img",{style:{marginRight:"8px"},width:"48",height:"48",src:s.Z.src,alt:"FbG"}),(0,r.jsx)(i.Z,{component:"h1",variant:"h6",style:{color:"white"},children:"FreeBoardGames.org"})]})}),null!==(t=e.toolbarContent)&&void 0!==t?t:(0,r.jsx)(d,{})]})})}),(0,r.jsx)("div",{style:{maxWidth:"1200px",marginLeft:"auto",marginRight:"auto"},"data-testid":"childrenDiv",children:e.children})]})}},890:function(e){e.exports={Main:"AlertLayer_Main__zGbWi",Inner:"AlertLayer_Inner__2efuy"}},9321:function(e){e.exports={NicknameCard:"NicknamePrompt_NicknameCard__VmMYa"}}},function(e){e.O(0,[601,35,172,422,999,774,888,179],(function(){return n=2321,e(e.s=n);var n}));var n=e.O();_N_E=n}]);