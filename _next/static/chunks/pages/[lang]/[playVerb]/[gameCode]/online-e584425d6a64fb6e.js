(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{2321:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[lang]/[playVerb]/[gameCode]/online",function(){return n(1150)}])},1596:function(e,t){"use strict";t.Z={src:"/_next/static/media/fbg_logo_white_48.7c343fc2.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAd0lEQVR42kXNIQrCAABG4V8Ny3YxDMEmaDWIoN3uMcQLqEFRsQlW68LGYGllfQfYZcb7B4Oxl1771Mewmw17Zg4kloTix5ctL04cKclE7jshF24UnFmJzB/mfnDlT0oiSq/rEU/ejqmIxMETibEXTL0jaB0PerwBQUtBrTw/pEYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},7828:function(e,t,n){"use strict";var r=n(4246),a=n(7378),o=n(3273),i=n.n(o);class s extends a.Component{render(){return(0,r.jsx)("div",{className:i().Main,onClick:this.onClick,ref:this.outerLayerRef,children:(0,r.jsx)("div",{className:i().Inner,children:this.props.children})})}constructor(...e){super(...e),this.outerLayerRef=a.createRef(),this.onClick=e=>{e.target===this.outerLayerRef.current&&this.props.onClickaway&&this.props.onClickaway()}}}t.Z=s},7635:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(4246),a=n(3569),o=n(4369);function i(){let{t:e}=(0,o.$G)("LoadingMessage");return(0,r.jsx)(a.Z,{type:"loading",message:e("loading")})}},3569:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(4246);n(7378);var a=n(5039);let o=e=>(0,r.jsx)("svg",{viewBox:"0 0 1 1",style:e.style,children:(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:"0.2",y1:"0.2",x2:"0.8",y2:"0.8",stroke:"black",strokeWidth:"0.05"}),(0,r.jsx)("line",{x1:"0.8",y1:"0.2",x2:"0.2",y2:"0.8",stroke:"black",strokeWidth:"0.05"})]})});var i=n(4794),s=n(7057),l=function(e){let t;t="error"===e.type?(0,r.jsx)(o,{style:{height:"128px"}}):(0,r.jsx)(a.Z,{});let n=(0,r.jsxs)("div",{style:{paddingTop:"16px",textAlign:"center"},children:[t,(0,r.jsxs)(i.Z,{variant:"h6",gutterBottom:!0,style:{paddingTop:"16px"},children:[e.message,(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),e.actionComponent]})]});return e.skipFbgBar?n:(0,r.jsx)(s.q,{children:n})}},1150:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return S},default:function(){return T}});var r=n(4246),a=n(7378);let o=[null,"charizard","pikachu"],i=l([null,"localhost:8001"]);function s(e){let t=e.hostname,n=e.index;return{resolved:!0,hostname:t,index:n}}function l(e){return e.map((e,t)=>({hostname:e,index:t}))}async function c(e){let t;if(!e)return!1;let n=location.protocol||"http:";try{t=await fetch("".concat(n,"//").concat(e,"/open"))}catch(r){return!1}if(!t.ok)return!1;let a=await t.text();return"open"===a}let d="fbgNickname2";var u=n(5830),h=n(8735),m=n(4369),x=n(7828),g=n(5130),f=n.n(g),p=n(3842),j=n(4794),y=n(1793);let k=/^[A-Za-z0-9]*$/;function v(e){return(null==e?void 0:e.length)>0&&e.match(k)}let _=e=>t=>{e(t.target.value)},A=(e,t)=>()=>{v(e)&&t(e)},w=(e,t)=>n=>{"Enter"===n.key&&t(e)};function N(e){let{t}=(0,m.$G)("NicknamePrompt"),[n,o]=(0,a.useState)(""),i=v(n),s=function(e){let t;let{t:n}=(0,m.$G)("NicknamePrompt");return e.match(k)||(t=n("alphanumerical_characters_only")),t}(n),l=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{autoFocus:!0,type:"text",defaultValue:n,onChange:_(o),onKeyPress:w(n,e.setNickname),helperText:s,error:!!s,inputProps:{maxLength:15}})}),(0,r.jsx)(u.Z,{variant:"contained",color:"primary",style:{marginTop:"16px"},onClick:A(n,e.setNickname),disabled:!i,children:t("set_nickname")})]});return(0,r.jsx)(x.Z,{children:(0,r.jsxs)(p.Z,{className:f().NicknameCard,children:[(0,r.jsx)(j.Z,{style:{paddingTop:"16px"},variant:"h5",component:"h3",children:t("enter_your_nickname")}),(0,r.jsx)(y.Z,{children:l})]})})}var b=n(7057),I=n(7635),Z=n(3569),C=n(6677),E=n.n(C);let L=function(e){let t=function(e){let[t,n]=(0,a.useState)({resolved:!1});return(0,a.useEffect)(()=>((async()=>{let t=location&&location.hostname&&"www.freeboardgames.org"==location.hostname.toLowerCase()?l(o.map(e=>e?"".concat(e,".freeboardgames.org:8001"):null)):i;if(e){n(s(t[e]));return}for(let r of(t.sort(()=>Math.random()-.5),t))if(await c(r.hostname)){n(s(r));return}t.sort();let a=t.filter(e=>null!==e.hostname).map(e=>e.hostname);n({resolved:!0,serversDown:a})})(),()=>{}),[]),t}(),[n,u]=function(){let[e,t]=(0,a.useState)({loaded:!1,loggedIn:!1});(0,a.useEffect)(()=>{let e=localStorage.getItem(d);e?t({loaded:!0,loggedIn:!0,nickname:e}):t({loaded:!0,loggedIn:!1})},[]);let n=e=>{localStorage.setItem(d,e),t({loaded:!0,loggedIn:!0,nickname:e})};return[e,n]}(),[h,m]=function(){let[e,t]=(0,a.useState)({loaded:!1}),n=e=>{let n={numPlayers:e.numPlayers};fetch("".concat(location.protocol,"//").concat(e.hostname,"/games/").concat(e.gameId,"/create"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{let n=e.matchID;t({loaded:!0,success:!0,roomId:n})},e=>{console.error(e),t({loaded:!0,success:!1})})};return[e,n]}();if(!t.resolved)return(0,r.jsx)(I.z,{});if(t.serversDown)return(0,r.jsx)(Z.Z,{type:"error",message:"Servers down: ".concat(t.serversDown.join(", "))});if(!n.loaded)return(0,r.jsx)(I.z,{});if(!n.loggedIn)return(0,r.jsx)(b.q,{children:(0,r.jsx)(N,{setNickname:u})});let x=n.nickname;if(!h.loaded){let g=t.hostname,f=e.gameId;return m({nickname:x,gameId:f,hostname:g,numPlayers:2}),(0,r.jsx)(I.z,{})}return h.success&&h.roomId?(E().replace("/".concat(e.params.lang,"/room?s=").concat(t.index,"&i=").concat(h.roomId)),(0,r.jsx)(I.z,{})):(0,r.jsx)(Z.Z,{type:"error",message:"Failed to create room"})};var S=!0,T=L},7057:function(e,t,n){"use strict";n.d(t,{q:function(){return h}});var r=n(4246);n(7378);var a=n(1267),o=n(3884),i=n(4794),s=n(1596),l=n(9894),c=n.n(l),d=n(5609);function u(){return(0,r.jsx)("div",{style:{marginLeft:"auto"},children:(0,r.jsx)(c(),{href:"/",children:(0,r.jsx)("a",{style:{textDecoration:"none",display:"flex",color:"white"},children:(0,r.jsx)(d.Z,{})})})})}let h=e=>{var t,n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:(0,r.jsx)(a.Z,{position:"sticky",children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(c(),{href:"/".concat(null!==(t=e.lang)&&void 0!==t?t:""),children:(0,r.jsxs)("a",{style:{textDecoration:"none",display:"flex",alignItems:"center"},children:[(0,r.jsx)("img",{style:{marginRight:"8px"},width:"48",height:"48",src:s.Z.src,alt:"FbG"}),(0,r.jsx)(i.Z,{component:"h1",variant:"h6",style:{color:"white"},children:"FreeBoardGames.org"})]})}),null!==(n=e.toolbarContent)&&void 0!==n?n:(0,r.jsx)(u,{})]})})}),(0,r.jsx)("div",{style:{maxWidth:"1200px",marginLeft:"auto",marginRight:"auto"},"data-testid":"childrenDiv",children:e.children})]})}},3273:function(e){e.exports={Main:"AlertLayer_Main__zGbWi",Inner:"AlertLayer_Inner__2efuy"}},5130:function(e){e.exports={NicknameCard:"NicknamePrompt_NicknameCard__VmMYa"}}},function(e){e.O(0,[601,816,206,422,736,774,888,179],function(){return e(e.s=2321)}),_N_E=e.O()}]);