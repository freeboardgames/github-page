(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{2003:function(t,e,n){var r={"./tictactoe/board":4762};function i(t){return n(s(t))}function s(t){if(!n.o(r,t)){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=s,t.exports=i,i.id=2003},6871:function(t,e,n){var r={"./gamesShared/definitions/game":9392,"./tictactoe/game":9438};function i(t){return n(s(t))}function s(t){if(!n.o(r,t)){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=s,t.exports=i,i.id=6871},1596:function(t,e){"use strict";e.Z={src:"/_next/static/media/fbg_logo_white_48.7c343fc2.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAd0lEQVR42kXNIQrCAABG4V8Ny3YxDMEmaDWIoN3uMcQLqEFRsQlW68LGYGllfQfYZcb7B4Oxl1771Mewmw17Zg4kloTix5ctL04cKclE7jshF24UnFmJzB/mfnDlT0oiSq/rEU/ejqmIxMETibEXTL0jaB0PerwBQUtBrTw/pEYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},7635:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(4246),i=n(3569),s=n(4369);function o(){let{t}=(0,s.$G)("LoadingMessage");return(0,r.jsx)(i.Z,{type:"loading",message:t("loading")})}},3569:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(4246);n(7378);var i=n(5039);let s=t=>(0,r.jsx)("svg",{viewBox:"0 0 1 1",style:t.style,children:(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:"0.2",y1:"0.2",x2:"0.8",y2:"0.8",stroke:"black",strokeWidth:"0.05"}),(0,r.jsx)("line",{x1:"0.8",y1:"0.2",x2:"0.2",y2:"0.8",stroke:"black",strokeWidth:"0.05"})]})});var o=n(4794),l=n(7057),a=function(t){let e;e="error"===t.type?(0,r.jsx)(s,{style:{height:"128px"}}):(0,r.jsx)(i.Z,{});let n=(0,r.jsxs)("div",{style:{paddingTop:"16px",textAlign:"center"},children:[e,(0,r.jsxs)(o.Z,{variant:"h6",gutterBottom:!0,style:{paddingTop:"16px"},children:[t.message,(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),t.actionComponent]})]});return t.skipFbgBar?n:(0,r.jsx)(l.q,{children:n})}},6679:function(t,e,n){"use strict";n.d(e,{g:function(){return l}});var r=n(4246),i=n(555);function s(){return(0,r.jsx)("h1",{children:"CONNECTION LOST"})}n(7378);var o=n(4369);function l(t){let{gameArgs:e,board:n}=t,l=t=>(0,r.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,r.jsx)(n,{...t}),(0,r.jsx)(s,{})]}),a=t=>{let s=(0,o.$G)("game-".concat(e.gameCode)).t,a={...t,gameArgs:e,translate:s},c=!t.isConnected&&e.mode!==i.G.LocalFriend;return c?(0,r.jsx)(l,{...a}):(0,r.jsx)(n,{...a})};return a}},2859:function(t,e,n){"use strict";n.d(e,{C:function(){return s},R:function(){return i}});var r=n(2743);function i(t){let e=localStorage.getItem("customization-".concat(t,"-setting"));return e&&JSON.parse(e)||r.EMPTY_FULL_GAME_CUSTOMIZATION_STATE}function s(t,e,n,r){let s=i(t);return s[e][n]=r,localStorage.setItem("customization-".concat(t,"-setting"),JSON.stringify(s)),s}},7057:function(t,e,n){"use strict";n.d(e,{q:function(){return d}});var r=n(4246);n(7378);var i=n(1267),s=n(3884),o=n(4794),l=n(1596),a=n(9894),c=n.n(a),u=n(5609);function h(){return(0,r.jsx)("div",{style:{marginLeft:"auto"},children:(0,r.jsx)(c(),{href:"/",children:(0,r.jsx)("a",{style:{textDecoration:"none",display:"flex",color:"white"},children:(0,r.jsx)(u.Z,{})})})})}let d=t=>{var e,n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:(0,r.jsx)(i.Z,{position:"sticky",children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(c(),{href:"/".concat(null!==(e=t.lang)&&void 0!==e?e:""),children:(0,r.jsxs)("a",{style:{textDecoration:"none",display:"flex",alignItems:"center"},children:[(0,r.jsx)("img",{style:{marginRight:"8px"},width:"48",height:"48",src:l.Z.src,alt:"FbG"}),(0,r.jsx)(o.Z,{component:"h1",variant:"h6",style:{color:"white"},children:"FreeBoardGames.org"})]})}),null!==(n=t.toolbarContent)&&void 0!==n?n:(0,r.jsx)(h,{})]})})}),(0,r.jsx)("div",{style:{maxWidth:"1200px",marginLeft:"auto",marginRight:"auto"},"data-testid":"childrenDiv",children:t.children})]})}},2743:function(t,e,n){"use strict";var r,i;n.r(e),n.d(e,{CustomizationType:function(){return r},EMPTY_FULL_GAME_CUSTOMIZATION_STATE:function(){return s}}),(i=r||(r={})).QUICK="quick",i.FULL="full";let s={local:{quick:null,full:null},online:{quick:null,full:null},AI:{quick:null,full:null}}},9392:function(t,e,n){"use strict";var r,i;n.r(e),n.d(e,{IGameStatus:function(){return r}}),(i=r||(r={}))[i.IN_DEVELOPMENT=0]="IN_DEVELOPMENT",i[i.PUBLISHED=1]="PUBLISHED"},555:function(t,e,n){"use strict";var r,i;n.d(e,{G:function(){return r}}),(i=r||(r={})).AI="AI",i.OnlineFriend="online",i.LocalFriend="local"},4762:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var r=n(4246),i=n(7378),s=n(4153),o=n(4794),l=n(1596),a=n(5830),c=n(1195),u=n(1206),h=n(505),d=n(9894),p=n.n(d);n(4284).env.JEST_WORKER_ID;class x extends i.Component{componentDidMount(){this.props.avoidOverscrollReload&&(document.body.style.overscrollBehavior="none")}componentWillUnmount(){this.props.avoidOverscrollReload&&(document.body.style.overscrollBehavior="auto")}render(){let t;let e=this.props.gameArgs.name;return e&&(t=(0,r.jsx)(o.Z,{variant:"h6",gutterBottom:!0,style:{float:"left",paddingTop:"9px",color:"white"},children:e})),(0,r.jsxs)("div",{style:{width:"100%",height:"100%",backgroundColor:"black"},children:[(0,r.jsxs)("div",{style:{display:"flex",maxWidth:this.props.maxWidth||"500px",marginLeft:"auto",marginRight:"auto"},children:[(0,r.jsx)(p(),{href:"/".concat(this.props.gameArgs.lang),children:(0,r.jsxs)("a",{style:{textDecoration:"none",display:"flex"},children:[(0,r.jsx)("img",{src:l.Z.src,alt:"FreeBoardGames.org",style:{paddingRight:"16px"}}),t]})}),(0,r.jsx)("div",{style:{flexGrow:1}}),this.renderChatButton(),this.getOptionsMenuButton(),this.getOptionsMenuItems()]}),(0,r.jsx)("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 49px)",textAlign:"center",lineHeight:"calc(100vh - 49px)"},children:(0,r.jsx)("div",{style:{position:"relative",width:"100%",maxWidth:this.props.maxWidth||"500px",color:"white",display:"inline-block",verticalAlign:"middle",lineHeight:"normal"},children:this.props.children})})]})}renderChatButton(){return null}hasOptionsMenu(){return this.props.optionsMenuItems&&this.props.optionsMenuItems.length>0}getOptionsMenuButton(){if(this.hasOptionsMenu())return(0,r.jsx)(a.Z,{onClick:this._openOptionsMenu,"aria-label":"Open options",variant:"outlined",children:(0,r.jsx)(c.Z,{style:{color:"white"}})})}getOptionsMenuItems(){if(this.hasOptionsMenu())return;let{menuAnchorEl:t}=this.state,e=this.props.optionsMenuItems().map((t,e)=>(0,r.jsx)(h.Z,{onClick:this._wrapOnClick(t.onClick),children:t.text},"option-".concat(e)));return(0,r.jsx)(u.Z,{id:"simple-menu",anchorEl:t,open:Boolean(t),onClose:this._closeOptionsMenu,children:e})}constructor(...t){super(...t),this.state={menuAnchorEl:null},this._openOptionsMenu=t=>{this.setState({menuAnchorEl:t.currentTarget})},this._closeOptionsMenu=()=>{this.setState({menuAnchorEl:null})},this._wrapOnClick=t=>()=>{this._closeOptionsMenu(),t()}}}var g=n(7057),m=n(1589),y=n(4369),v=n(555),f=n(6677);function j(t){if(!t.extraCardContent)return null;let e=(0,r.jsx)("div",{style:{paddingBottom:"12px",maxWidth:"500px",margin:"auto"},children:t.extraCardContent});return e}let A=(t,e)=>()=>{e.mode===v.G.AI||e.mode===v.G.LocalFriend?t.push(window.location.pathname):alert("TODO before launch")};function O(t){let e=(0,f.useRouter)(),{t:n}=(0,y.$G)("GameOver"),i=(0,r.jsx)(j,{extraCardContent:t.extraCardContent}),s=(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsxs)(a.Z,{onClick:A(e,t.gameArgs),variant:"outlined",style:{marginRight:"auto",marginLeft:"auto",marginBottom:"24px"},children:[(0,r.jsx)(m.Z,{style:{marginRight:"8px"}}),n("play_again")]})});return(0,r.jsxs)(g.q,{lang:t.gameArgs.lang,children:[(0,r.jsx)(o.Z,{variant:"h6",gutterBottom:!0,align:"center",style:{marginTop:"16px"},"data-testid":"gameOverText",children:n("game_over",{result:t.result})}),s,i]})}let _=(0,s.qC)((0,s.hC)("GameLayout")),C=t=>{var e;let n=()=>{var n;return null!==(e=null===(n=t.optionsMenuItems)||void 0===n?void 0:n.call(t))&&void 0!==e?e:[]};return t.gameOver?(0,r.jsx)(O,{result:t.gameOver,gameArgs:t.gameArgs,extraCardContent:t.extraCardContent}):(0,r.jsx)(x,{optionsMenuItems:n,maxWidth:t.maxWidth,avoidOverscrollReload:t.avoidOverscrollReload,gameArgs:t.gameArgs,children:t.children})},w=_(C),k={strokeWidth:.1},I={stroke:"white",strokeWidth:.025},E=t=>(0,r.jsxs)("g",{className:"cross",children:[(0,r.jsx)("line",{x1:t.x+.25,y1:t.y+.25,x2:t.x+.75,y2:t.y+.75,stroke:"red",style:k}),",",(0,r.jsx)("line",{x1:t.x+.75,y1:t.y+.25,x2:t.x+.25,y2:t.y+.75,stroke:"red",style:k})]},"cross".concat(t.x,",").concat(t.y)),M=t=>(0,r.jsx)("circle",{cx:t.x+.5,cy:t.y+.5,r:".25",fill:"none",stroke:"lime",style:k},"circle".concat(t.x,",").concat(t.y)),B=[(0,r.jsx)("line",{x1:"1",y1:"0",x2:"1",y2:"3",style:I},"line1"),(0,r.jsx)("line",{x1:"2",y1:"0",x2:"2",y2:"3",style:I},"line2"),(0,r.jsx)("line",{x1:"0",y1:"1",x2:"3",y2:"1",style:I},"line3"),(0,r.jsx)("line",{x1:"0",y1:"2",x2:"3",y2:"2",style:I},"line4"),(0,r.jsx)("line",{x1:"0",y1:"1",x2:"3",y2:"1",style:I},"line5")];function T(t,e){return(t&&t.mode===v.G.OnlineFriend||t&&t.mode===v.G.AI)&&null!==e}class G extends i.Component{isActive(t){return this.props.isActive&&null===this.props.G.cells[t]}_getStatus(){if(T(this.props.gameArgs,this.props.playerID))return this.props.ctx.currentPlayer===this.props.playerID?this.props.translate("your_turn"):this.props.translate("waiting_for_opponent");switch(this.props.ctx.currentPlayer){case"0":return this.props.translate("red_s_turn");case"1":return this.props.translate("green_s_turn")}}_getGameOver(){if(T(this.props.gameArgs,this.props.playerID))return void 0===this.props.ctx.gameover.winner?"draw":this.props.ctx.gameover.winner===this.props.playerID?this.props.translate("you_won"):this.props.translate("you_lost");switch(this.props.ctx.gameover.winner){case"0":return this.props.translate("red_won");case"1":return this.props.translate("green_won");case void 0:return this.props.translate("draw")}}render(){return this.props.ctx.gameover?(0,r.jsx)(w,{gameOver:this._getGameOver(),extraCardContent:this._getGameOverBoard(),gameArgs:this.props.gameArgs}):(0,r.jsx)(w,{gameArgs:this.props.gameArgs,children:this._getBoard()})}_getCells(){let t=[];for(let e=0;e<3;e++)for(let n=0;n<3;n++){let i;let s=3*e+n;t.push((0,r.jsx)("rect",{x:e,y:n,width:"1",height:"1",fill:"black",onClick:this.onClick(s)},"".concat(s))),"0"===this.props.G.cells[s]?i=(0,r.jsx)(E,{x:e,y:n},"cross".concat(s)):"1"===this.props.G.cells[s]&&(i=(0,r.jsx)(M,{x:e,y:n},"circle".concat(s))),i&&t.push(i)}return t}_getBoard(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{variant:"h5",style:{textAlign:"center",color:"white",marginBottom:"16px"},children:this._getStatus()}),(0,r.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 3 3",children:[this._getCells(),B]})]})}_getGameOverBoard(){return(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsxs)("svg",{width:"50%",height:"50%",viewBox:"0 0 3 3",children:[this._getCells(),B]})})}constructor(...t){super(...t),this.onClick=t=>()=>{this.isActive(t)&&this.props.moves.clickCell(t)}}}var b=G},9438:function(t,e,n){"use strict";function r(t){for(let e of[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]){let n=t[e[0]],r=n;for(let i of e)if(t[i]!==n){r=null;break}if(null!=r)return!0}return!1}n.r(e),n.d(e,{TictactoeGame:function(){return i},isVictory:function(){return r}});let i={name:"tictactoe",setup:()=>({cells:Array(9).fill(null)}),moves:{clickCell(t,e,n){let r=[...t.cells];if(null===r[n])return r[n]=e.currentPlayer,{...t,cells:r}}},turn:{minMoves:1,maxMoves:1},endIf:(t,e)=>r(t.cells)?{winner:e.currentPlayer}:0===t.cells.filter(t=>null===t).length?{draw:!0}:void 0};e.default=i}}]);