(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{2003:function(t,n,e){var r={"./tictactoe/board":5099};function i(t){var n=o(t);return e(n)}function o(t){if(!e.o(r,t)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=2003},6871:function(t,n,e){var r={"./gamesShared/definitions/game":6137,"./tictactoe/game":3791};function i(t){var n=o(t);return e(n)}function o(t){if(!e.o(r,t)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=6871},587:function(t,n){"use strict";n.Z={src:"/_next/static/media/fbg_logo_white_48.7c343fc2.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAd0lEQVR42kXNIQrCAABG4V8Ny3YxDMEmaDWIoN3uMcQLqEFRsQlW68LGYGllfQfYZcb7B4Oxl1771Mewmw17Zg4kloTix5ctL04cKclE7jshF24UnFmJzB/mfnDlT0oiSq/rEU/ejqmIxMETibEXTL0jaB0PerwBQUtBrTw/pEYAAAAASUVORK5CYII="}},5621:function(t,n,e){"use strict";e.d(n,{z:function(){return u}});var r=e(4246),i=(e(7378),e(5039)),o=function(t){return(0,r.jsx)("svg",{viewBox:"0 0 1 1",style:t.style,children:(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:"0.2",y1:"0.2",x2:"0.8",y2:"0.8",stroke:"black",strokeWidth:"0.05"}),(0,r.jsx)("line",{x1:"0.8",y1:"0.2",x2:"0.2",y2:"0.8",stroke:"black",strokeWidth:"0.05"})]})})},s=e(4794),l=e(8330);var a=function(t){var n;n="error"===t.type?(0,r.jsx)(o,{style:{height:"128px"}}):(0,r.jsx)(i.Z,{});var e=(0,r.jsxs)("div",{style:{paddingTop:"16px",textAlign:"center"},children:[n,(0,r.jsxs)(s.Z,{variant:"h6",gutterBottom:!0,style:{paddingTop:"16px"},children:[t.message,(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),t.actionComponent]})]});return t.skipFbgBar?e:(0,r.jsx)(l.q,{children:e})},c=e(4369);function u(){var t=(0,c.$G)("LoadingMessage").t;return(0,r.jsx)(a,{type:"loading",message:t("loading")})}},1924:function(t,n,e){"use strict";e.d(n,{g:function(){return c}});var r=e(9722),i=e(169),o=e(4246),s=e(2313);e(7378);function l(){return(0,o.jsx)("h1",{children:"CONNECTION LOST"})}var a=e(4369);function c(t){var n=t.gameArgs,e=t.board,c=function(t){return(0,o.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,o.jsx)(e,(0,r.Z)({},t)),(0,o.jsx)(l,{})]})};return function(t){var l=(0,a.$G)("game-".concat(n.gameCode)).t,u=(0,i.Z)((0,r.Z)({},t),{gameArgs:n,translate:l});return!t.isConnected&&n.mode!==s.G.LocalFriend?(0,o.jsx)(c,(0,r.Z)({},u)):(0,o.jsx)(e,(0,r.Z)({},u))}}},485:function(t,n,e){"use strict";e.d(n,{C:function(){return o},R:function(){return i}});var r=e(6446);function i(t){var n=localStorage.getItem("customization-".concat(t,"-setting"));return n&&JSON.parse(n)||r.EMPTY_FULL_GAME_CUSTOMIZATION_STATE}function o(t,n,e,r){var o=i(t);return o[n][e]=r,localStorage.setItem("customization-".concat(t,"-setting"),JSON.stringify(o)),o}},8330:function(t,n,e){"use strict";e.d(n,{q:function(){return d}});var r=e(4246),i=(e(7378),e(1267)),o=e(3884),s=e(4794),l=e(587),a=e(9894),c=e.n(a),u=e(5609);function h(){return(0,r.jsx)("div",{style:{marginLeft:"auto"},children:(0,r.jsx)(c(),{href:"/",children:(0,r.jsx)("a",{style:{textDecoration:"none",display:"flex",color:"white"},children:(0,r.jsx)(u.Z,{})})})})}var d=function(t){var n,e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:(0,r.jsx)(i.Z,{position:"sticky",children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(c(),{href:"/".concat(null!==(n=t.lang)&&void 0!==n?n:""),children:(0,r.jsxs)("a",{style:{textDecoration:"none",display:"flex",alignItems:"center"},children:[(0,r.jsx)("img",{style:{marginRight:"8px"},width:"48",height:"48",src:l.Z.src,alt:"FbG"}),(0,r.jsx)(s.Z,{component:"h1",variant:"h6",style:{color:"white"},children:"FreeBoardGames.org"})]})}),null!==(e=t.toolbarContent)&&void 0!==e?e:(0,r.jsx)(h,{})]})})}),(0,r.jsx)("div",{style:{maxWidth:"1200px",marginLeft:"auto",marginRight:"auto"},"data-testid":"childrenDiv",children:t.children})]})}},6446:function(t,n,e){"use strict";var r;e.r(n),e.d(n,{CustomizationType:function(){return r},EMPTY_FULL_GAME_CUSTOMIZATION_STATE:function(){return i}}),function(t){t.QUICK="quick",t.FULL="full"}(r||(r={}));var i={local:{quick:null,full:null},online:{quick:null,full:null},AI:{quick:null,full:null}}},6137:function(t,n,e){"use strict";var r;e.r(n),e.d(n,{IGameStatus:function(){return r}}),function(t){t[t.IN_DEVELOPMENT=0]="IN_DEVELOPMENT",t[t.PUBLISHED=1]="PUBLISHED"}(r||(r={}))},2313:function(t,n,e){"use strict";var r;e.d(n,{G:function(){return r}}),function(t){t.AI="AI",t.OnlineFriend="online",t.LocalFriend="local"}(r||(r={}))},5099:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return b}});var r=e(4364),i=e(619),o=e(6080),s=e(4246),l=e(7378),a=e(4153),c=e(4794),u=e(587),h=e(5830),d=e(1195),p=e(8519),x=e(505),g=e(9894),f=e.n(g),v=(e(4284).env.JEST_WORKER_ID,function(t){(0,i.Z)(e,t);var n=(0,o.Z)(e);function e(){var t;return(0,r.Z)(this,e),(t=n.apply(this,arguments)).state={menuAnchorEl:null},t._openOptionsMenu=function(n){t.setState({menuAnchorEl:n.currentTarget})},t._closeOptionsMenu=function(){t.setState({menuAnchorEl:null})},t._wrapOnClick=function(n){return function(){t._closeOptionsMenu(),n()}},t}var l=e.prototype;return l.componentDidMount=function(){this.props.avoidOverscrollReload&&(document.body.style.overscrollBehavior="none")},l.componentWillUnmount=function(){this.props.avoidOverscrollReload&&(document.body.style.overscrollBehavior="auto")},l.render=function(){var t,n=this.props.gameArgs.name;return n&&(t=(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,style:{float:"left",paddingTop:"9px",color:"white"},children:n})),(0,s.jsxs)("div",{style:{width:"100%",height:"100%",backgroundColor:"black"},children:[(0,s.jsxs)("div",{style:{display:"flex",maxWidth:this.props.maxWidth||"500px",marginLeft:"auto",marginRight:"auto"},children:[(0,s.jsx)(f(),{href:"/".concat(this.props.gameArgs.lang),children:(0,s.jsxs)("a",{style:{textDecoration:"none",display:"flex"},children:[(0,s.jsx)("img",{src:u.Z.src,alt:"FreeBoardGames.org",style:{paddingRight:"16px"}}),t]})}),(0,s.jsx)("div",{style:{flexGrow:1}}),this.renderChatButton(),this.getOptionsMenuButton(),this.getOptionsMenuItems()]}),(0,s.jsx)("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 49px)",textAlign:"center",lineHeight:"calc(100vh - 49px)"},children:(0,s.jsx)("div",{style:{position:"relative",width:"100%",maxWidth:this.props.maxWidth||"500px",color:"white",display:"inline-block",verticalAlign:"middle",lineHeight:"normal"},children:this.props.children})})]})},l.renderChatButton=function(){return null},l.hasOptionsMenu=function(){return this.props.optionsMenuItems&&this.props.optionsMenuItems.length>0},l.getOptionsMenuButton=function(){if(this.hasOptionsMenu())return(0,s.jsx)(h.Z,{onClick:this._openOptionsMenu,"aria-label":"Open options",variant:"outlined",children:(0,s.jsx)(d.Z,{style:{color:"white"}})})},l.getOptionsMenuItems=function(){var t=this;if(!this.hasOptionsMenu()){var n=this.state.menuAnchorEl,e=this.props.optionsMenuItems().map((function(n,e){return(0,s.jsx)(x.Z,{onClick:t._wrapOnClick(n.onClick),children:n.text},"option-".concat(e))}));return(0,s.jsx)(p.Z,{id:"simple-menu",anchorEl:n,open:Boolean(n),onClose:this._closeOptionsMenu,children:e})}},e}(l.Component)),m=e(8330),y=e(1589),j=e(4369),A=e(2313),O=e(6677);function _(t){return t.extraCardContent?(0,s.jsx)("div",{style:{paddingBottom:"12px",maxWidth:"500px",margin:"auto"},children:t.extraCardContent}):null}var C=function(t,n){return function(){n.mode===A.G.AI||n.mode===A.G.LocalFriend?t.push(window.location.pathname):alert("TODO before launch")}};function w(t){var n=(0,O.useRouter)(),e=(0,j.$G)("GameOver").t,r=(0,s.jsx)(_,{extraCardContent:t.extraCardContent}),i=(0,s.jsx)("div",{style:{textAlign:"center"},children:(0,s.jsxs)(h.Z,{onClick:C(n,t.gameArgs),variant:"outlined",style:{marginRight:"auto",marginLeft:"auto",marginBottom:"24px"},children:[(0,s.jsx)(y.Z,{style:{marginRight:"8px"}}),e("play_again")]})});return(0,s.jsxs)(m.q,{lang:t.gameArgs.lang,children:[(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,align:"center",style:{marginTop:"16px"},"data-testid":"gameOverText",children:e("game_over",{result:t.result})}),i,r]})}var k=(0,a.qC)((0,a.hC)("GameLayout"))((function(t){var n;return t.gameOver?(0,s.jsx)(w,{result:t.gameOver,gameArgs:t.gameArgs,extraCardContent:t.extraCardContent}):(0,s.jsx)(v,{optionsMenuItems:function(){var e;return null!==(n=null===(e=t.optionsMenuItems)||void 0===e?void 0:e.call(t))&&void 0!==n?n:[]},maxWidth:t.maxWidth,avoidOverscrollReload:t.avoidOverscrollReload,gameArgs:t.gameArgs,children:t.children})})),I={strokeWidth:.1},E={stroke:"white",strokeWidth:.025},Z=function(t){return(0,s.jsxs)("g",{className:"cross",children:[(0,s.jsx)("line",{x1:t.x+.25,y1:t.y+.25,x2:t.x+.75,y2:t.y+.75,stroke:"red",style:I}),",",(0,s.jsx)("line",{x1:t.x+.75,y1:t.y+.25,x2:t.x+.25,y2:t.y+.75,stroke:"red",style:I})]},"cross".concat(t.x,",").concat(t.y))},M=function(t){return(0,s.jsx)("circle",{cx:t.x+.5,cy:t.y+.5,r:".25",fill:"none",stroke:"lime",style:I},"circle".concat(t.x,",").concat(t.y))},B=[(0,s.jsx)("line",{x1:"1",y1:"0",x2:"1",y2:"3",style:E},"line1"),(0,s.jsx)("line",{x1:"2",y1:"0",x2:"2",y2:"3",style:E},"line2"),(0,s.jsx)("line",{x1:"0",y1:"1",x2:"3",y2:"1",style:E},"line3"),(0,s.jsx)("line",{x1:"0",y1:"2",x2:"3",y2:"2",style:E},"line4"),(0,s.jsx)("line",{x1:"0",y1:"1",x2:"3",y2:"1",style:E},"line5")];function T(t,n){return(function(t){return t&&t.mode===A.G.OnlineFriend}(t)||function(t){return t&&t.mode===A.G.AI}(t))&&!function(t){return null===t}(n)}var G=function(t){(0,i.Z)(e,t);var n=(0,o.Z)(e);function e(){var t;return(0,r.Z)(this,e),(t=n.apply(this,arguments)).onClick=function(n){return function(){t.isActive(n)&&t.props.moves.clickCell(n)}},t}var l=e.prototype;return l.isActive=function(t){return this.props.isActive&&null===this.props.G.cells[t]},l._getStatus=function(){if(T(this.props.gameArgs,this.props.playerID))return this.props.ctx.currentPlayer===this.props.playerID?this.props.translate("your_turn"):this.props.translate("waiting_for_opponent");switch(this.props.ctx.currentPlayer){case"0":return this.props.translate("red_s_turn");case"1":return this.props.translate("green_s_turn")}},l._getGameOver=function(){if(T(this.props.gameArgs,this.props.playerID))return void 0!==this.props.ctx.gameover.winner?this.props.ctx.gameover.winner===this.props.playerID?this.props.translate("you_won"):this.props.translate("you_lost"):"draw";switch(this.props.ctx.gameover.winner){case"0":return this.props.translate("red_won");case"1":return this.props.translate("green_won");case void 0:return this.props.translate("draw")}},l.render=function(){return this.props.ctx.gameover?(0,s.jsx)(k,{gameOver:this._getGameOver(),extraCardContent:this._getGameOverBoard(),gameArgs:this.props.gameArgs}):(0,s.jsx)(k,{gameArgs:this.props.gameArgs,children:this._getBoard()})},l._getCells=function(){for(var t=[],n=0;n<3;n++)for(var e=0;e<3;e++){var r=3*n+e;t.push((0,s.jsx)("rect",{x:n,y:e,width:"1",height:"1",fill:"black",onClick:this.onClick(r)},"".concat(r)));var i=void 0;"0"===this.props.G.cells[r]?i=(0,s.jsx)(Z,{x:n,y:e},"cross".concat(r)):"1"===this.props.G.cells[r]&&(i=(0,s.jsx)(M,{x:n,y:e},"circle".concat(r))),i&&t.push(i)}return t},l._getBoard=function(){return(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Z,{variant:"h5",style:{textAlign:"center",color:"white",marginBottom:"16px"},children:this._getStatus()}),(0,s.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 3 3",children:[this._getCells(),B]})]})},l._getGameOverBoard=function(){return(0,s.jsx)("div",{style:{textAlign:"center"},children:(0,s.jsxs)("svg",{width:"50%",height:"50%",viewBox:"0 0 3 3",children:[this._getCells(),B]})})},e}(l.Component),b=G},3791:function(t,n,e){"use strict";e.r(n),e.d(n,{TictactoeGame:function(){return l},isVictory:function(){return s}});var r=e(9722),i=e(169),o=e(6131);function s(t){var n=!0,e=!1,r=void 0;try{for(var i,o=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]][Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=t[s[0]],a=l,c=!0,u=!1,h=void 0;try{for(var d,p=s[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){if(t[d.value]!==l){a=null;break}}}catch(x){u=!0,h=x}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}if(null!=a)return!0}}catch(x){e=!0,r=x}finally{try{n||null==o.return||o.return()}finally{if(e)throw r}}return!1}var l={name:"tictactoe",setup:function(){return{cells:Array(9).fill(null)}},moves:{clickCell:function(t,n,e){var s=(0,o.Z)(t.cells);if(null===s[e])return s[e]=n.currentPlayer,(0,i.Z)((0,r.Z)({},t),{cells:s})}},turn:{minMoves:1,maxMoves:1},endIf:function(t,n){return s(t.cells)?{winner:n.currentPlayer}:0===t.cells.filter((function(t){return null===t})).length?{draw:!0}:void 0}};n.default=l}}]);